<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>READY SET WON</title>
<style>
  body {
    margin: 0;
    background: #cce6ff;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }
  canvas {
    image-rendering: pixelated;
    image-rendering: crisp-edges;
    background: #8fd0ff;
    border: 4px solid #333;
  }
</style>
</head>
<body>
<canvas id="game" width="800" height="400"></canvas>
<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let gameStarted = false;
let score = 0;
let jumpPower = 0;
let gravity = 0.5;
let jungwon = { x: 50, y: 300, width: 20, height: 30, vy: 0, onGround: true };
let obstacles = [];
let frame = 0;

// Pixel art draw helpers
function drawPixelRect(x, y, w, h, color) {
  ctx.fillStyle = color;
  ctx.fillRect(x, y, w, h);
}

// Draw pixel Jungwon
function drawJungwon(px, py) {
  // hair
  drawPixelRect(px, py, 20, 8, "#6b4e3d");
  // face
  drawPixelRect(px+4, py+8, 12, 8, "#ffdbac");
  // shirt
  drawPixelRect(px+2, py+16, 16, 8, "#87ceeb");
  // legs
  drawPixelRect(px+4, py+24, 4, 6, "#555");
  drawPixelRect(px+12, py+24, 4, 6, "#555");
}

// Draw pixel heart
function drawHeart(x, y) {
  ctx.fillStyle = "#ff4d6d";
  ctx.fillRect(x+1, y, 2, 2);
  ctx.fillRect(x+4, y, 2, 2);
  ctx.fillRect(x, y+2, 8, 2);
  ctx.fillRect(x+1, y+4, 6, 2);
  ctx.fillRect(x+2, y+6, 4, 2);
}

// Pixel obstacles
function drawObstacle(o) {
  if (o.type === "cake") {
    drawPixelRect(o.x, o.y, 16, 4, "#d2691e");
    drawPixelRect(o.x, o.y-4, 16, 4, "#fff0f5");
    drawPixelRect(o.x, o.y-8, 16, 4, "#ff69b4");
    drawPixelRect(o.x+6, o.y-12, 4, 4, "#ff0000");
  } else if (o.type === "cactus") {
    drawPixelRect(o.x+6, o.y-16, 4, 16, "#228b22");
    drawPixelRect(o.x, o.y-12, 4, 8, "#228b22");
    drawPixelRect(o.x+12, o.y-8, 4, 8, "#228b22");
  } else if (o.type === "strawberry") {
    drawPixelRect(o.x+4, o.y-8, 8, 8, "#ff0000");
    drawPixelRect(o.x+6, o.y-10, 4, 2, "#228b22");
  } else if (o.type === "cat") {
    drawPixelRect(o.x, o.y-8, 16, 8, "#999");
    drawPixelRect(o.x+2, o.y-10, 4, 2, "#999");
    drawPixelRect(o.x+10, o.y-10, 4, 2, "#999");
    drawPixelRect(o.x+4, o.y-4, 2, 2, "#000");
    drawPixelRect(o.x+10, o.y-4, 2, 2, "#000");
  } else if (o.type === "present") {
    drawPixelRect(o.x, o.y-12, 12, 12, "#ff0000");
    drawPixelRect(o.x+4, o.y-12, 4, 12, "#ffff00");
    drawPixelRect(o.x, o.y-8, 12, 4, "#ffff00");
  }
}

// Jump
function jump() {
  if (jungwon.onGround) {
    jungwon.vy = -10;
    jungwon.onGround = false;
  }
}

document.addEventListener("keydown", e => {
  if (e.code === "Space" || e.code === "ArrowUp") {
    if (!gameStarted) startGame();
    else jump();
  }
});
canvas.addEventListener("click", () => {
  if (!gameStarted) startGame();
  else jump();
});

function startGame() {
  gameStarted = true;
  score = 0;
  jungwon.y = 300;
  jungwon.vy = 0;
  jungwon.onGround = true;
  obstacles = [];
}

function update() {
  if (gameStarted) {
    // gravity
    jungwon.vy += gravity;
    jungwon.y += jungwon.vy;
    if (jungwon.y >= 300) {
      jungwon.y = 300;
      jungwon.vy = 0;
      jungwon.onGround = true;
    }
    // spawn obstacles
    if (frame % 90 === 0) {
      const types = ["cake", "cactus", "strawberry", "cat", "present"];
      obstacles.push({ x: 800, y: 316, type: types[Math.floor(Math.random()*types.length)] });
    }
    // move obstacles
    obstacles.forEach(o => o.x -= 4);
    obstacles = obstacles.filter(o => o.x > -20);
    // collision check
    obstacles.forEach(o => {
      if (jungwon.x < o.x + 16 && jungwon.x + jungwon.width > o.x &&
          jungwon.y < o.y && jungwon.y + jungwon.height > o.y - 20) {
        score = 0; // reset score on hit
      }
    });
    score++;
  }
  frame++;
}

function drawBackground() {
  ctx.fillStyle = "#8fd0ff";
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  // grass
  ctx.fillStyle = "#55aa55";
  ctx.fillRect(0, 336, canvas.width, 64);
  // clouds
  ctx.fillStyle = "#fff";
  ctx.fillRect(100, 50, 24, 8);
  ctx.fillRect(124, 50, 16, 8);
  ctx.fillRect(500, 80, 20, 8);
  ctx.fillRect(520, 80, 20, 8);
}

function draw() {
  drawBackground();
  // score hearts
  for (let i = 0; i < Math.min(score/50, 10); i++) {
    drawHeart(10 + i*12, 10);
  }
  // draw Jungwon
  drawJungwon(jungwon.x, jungwon.y);
  // draw obstacles
  obstacles.forEach(o => drawObstacle(o));
  // title
  if (!gameStarted) {
    ctx.fillStyle = "#000";
    ctx.font = "20px monospace";
    ctx.fillText("READY SET WON", canvas.width/2 - 80, canvas.height/2 - 20);
    ctx.fillText("Tap or Press Space to Start", canvas.width/2 - 120, canvas.height/2 + 10);
  }
}

function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
